#### Не забравяйте да сложите `.stack-work` и `project.cabal` в `.gitignore`-а си!

## Setup
Инсталирайте `stack` - [инструкции за инсталиране](https://docs.haskellstack.org/en/stable/install_and_upgrade/)

## Инструкции за слагане на готов еднофайлов проект в шаблона

0. Взимате си сорс кода, слагате го в `src/Lib.hs`, внимавайки да не затриете
    ```haskell
    module Lib where
    ```
    от най-горе.
1. Ако имате някакво `IO ()`, което е "входна" точка на програмата ви,
    правите тя да се казва `main` (т.е. сменяте тялото на наличния
    ```haskell
    main :: IO ()
    main = putStrLn "Hi!"
    ```
    да е каквото ви трябва на вас.)
2. Слагате каквито външни пакети ползвате под секцията `dependencies` в
    `package.yaml` файла. Например в момента там седят пакетите:
    * [`base`](https://hackage.haskell.org/package/base)
    (ограничен до версии по-нови или равни на 4.7 по-стари от 5 - не е важно)

    Да речем, че на вас ви трябва [`Data.Map.Lazy`](https://hackage.haskell.org/package/containers-0.6.2.1/docs/Data-Map-Lazy.html) от [`containers`](https://hackage.haskell.org/package/containers-0.6.2.1).

    Слагате на нов ред
    ```yaml
    - containers
    ```
    и сте готови.

    Секцията `dependencies` вече изглежда така:
    ```yaml
    dependencies:
    - base >= 4.7 && < 5
    - containers
    ```

## Пускане на проекта ви
**N.B. Първото пускане ще отнеме сравнително голямо количество време,
тъй като `stack` тегли специфична версия на `ghc` и комплира специфични пакети за нея, които са проверени че работят заедно**

**N.B. За проекта съм пуснал `-Werror`, което означава че всички пуснати предупреждения са
_комплационни грешки_. Очаква се да предадете проект, който се компилира под тези условия.**

За да използвате настройките от `package.yaml` файла (вкл. външни пакети, предупреждения, `hlint`), трябва да извиквате `stack`, **не** директно `ghc`.

Извиквания на `stack`:
* `stack build` - компилира source файловете ви
* `stack ghci` - пуска `ghci` в което са заредени source файловете ви
* `stack run` - изпълнява `main` действието

Флагът `--file-watch` на `stack` е много удобен - когато го подадете към
`stack build/test` автоматично прекомпилира, при промяна на някой source файл.

Примери:
* `stack ghci`
* `stack build --file-watch`

## Структура
В `src` можете да слагате всичките си файлове от проекта.

Отбелязвам, че ако искате да имате модул `Universe.Atom`, той трябва да седи
**в директория** `Universe`, с име `Atom.hs`, т.е. `src/Universe/Atom.hs`

В `package.yaml` седят разни опции на компилатора, например предупреждения.

По време на разработка може да е полезно да се закоментира `-Werror` временно,
за да може да се отложи оправянето им.

При ползата на допълнителни пакети те се слагат под секцията `dependencies`.

## Препоръчителна чистота на кода

Можете (и препоръчвам) да си инсталирате `hlint`:

`stack install hlint`

След това можете да пуснете `hlint` върху вашите файлове,
за да ви препоръча начини да подобрите кода си.

Това е полезно за вас защото
* се учите да пишете по-"идиоматичен" Haskell
* не трябва да ме чакате за feedback, за сравнително голяма част от коментарите, които бих сложил
